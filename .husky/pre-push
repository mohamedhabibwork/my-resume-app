#!/bin/sh
# Pre-push hook - Ø§Ù„ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹

echo "ğŸš€ Running pre-push checks..."
echo "ğŸš€ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹..."

# Run type check
echo ""
echo "ğŸ“ Running TypeScript type check..."
echo "ğŸ“ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø£Ù†ÙˆØ§Ø¹ TypeScript..."
bun run type-check

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ TypeScript type check failed!"
  echo "âŒ ÙØ´Ù„ ÙØ­Øµ Ø£Ù†ÙˆØ§Ø¹ TypeScript!"
  echo ""
  echo "EN: Please fix type errors before pushing."
  echo "AR: ÙŠØ±Ø¬Ù‰ Ø¥ØµÙ„Ø§Ø­ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹."
  exit 1
fi

# Run linter
echo ""
echo "ğŸ” Running ESLint..."
echo "ğŸ” Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ ESLint..."
bun run lint

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ ESLint check failed!"
  echo "âŒ ÙØ´Ù„ ÙØ­Øµ ESLint!"
  echo ""
  echo "EN: Please fix linting errors before pushing."
  echo "AR: ÙŠØ±Ø¬Ù‰ Ø¥ØµÙ„Ø§Ø­ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹."
  exit 1
fi

# Run build to ensure it compiles
echo ""
echo "ğŸ—ï¸ Running build check..."
echo "ğŸ—ï¸ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø¨Ù†Ø§Ø¡..."
bun run build-only

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Build failed!"
  echo "âŒ ÙØ´Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡!"
  echo ""
  echo "EN: Please fix build errors before pushing."
  echo "AR: ÙŠØ±Ø¬Ù‰ Ø¥ØµÙ„Ø§Ø­ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹."
  exit 1
fi

echo ""
echo "âœ… All pre-push checks passed!"
echo "âœ… Ù†Ø¬Ø­Øª Ø¬Ù…ÙŠØ¹ ÙØ­ÙˆØµØ§Øª Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹!"
echo ""
echo "ğŸš€ Pushing to remote..."
echo "ğŸš€ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯ÙØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø¨Ø¹ÙŠØ¯..."
